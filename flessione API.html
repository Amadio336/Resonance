<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="risultato"></div>

    <script>
      const risultato = document.getElementById("risultato");

      let testoGreco = "μὲν ὑμεῖς, ἄνδρες Ἀθηναῖοι, πεπόνθατε ὑπὸ"; // viene fornito il testo greco

      let arr1 = testoGreco.split(" "); // viene trasformato in un array con split, ogni spazio è un elemento

      let index = 0;
      let arr2 = []; // viene creato un array dove ogni elemento di arr1 viene trasformato in un oggetto con il suo indice
      let sortedArr = [];
      
      arr1.forEach((gkw) => { // prendere gli elementi di arr1, ci mette un indce e le mette dentro arr2
        const gkwObj = {
          word: gkw,
          id: index,
        };
        
        arr2.push(gkwObj);
        
        index++; // incrementa l'indice
      });
      
      console.log(arr1)

      arr2.forEach((gkw) => {
       
       
        fetch(
          `http://services.perseids.org/bsp/morphologyservice/analysis/word?lang=grc&engine=morpheusgrc&word=${gkw.word}`  // viene fatta una richiesta per la flessione di una parola
        )
          .then((response) => response.text())
          .then((data) => {
            const jsonFIle = JSON.parse(data);

            const notSortedObj = {
              SubVoce: jsonFIle.RDF.Annotation.Body.rest.entry.dict.hdwd.$ ,
              category: jsonFIle.RDF.Annotation.Body.rest.entry.dict.pofs.$,
              id: gkw.id,
            };
            sortedArr.push(notSortedObj);
            sortedArr.sort((a, b) => a.id - b.id);

          })
          .catch((error) => console.error("Errore nel recupero dati:", error));
          
          
        });
        
        console.log(sortedArr)

    </script>
  </body>
</html>
